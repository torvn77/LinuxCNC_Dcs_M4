#<back_height> = #<_z>
#<safe_height> = 1
#<f_drill> = 120
#<s_drill> = 6000
#<f_down> = 400
#<z_drill_start> = 0
#<z_drill_step> = 10 
#<z_drill_intent> = -63
#<cleaning_height> = 0
#<cleaning_pause> = 1

()
O<if_01> if [[ #<_rpm> NE #<s_drill> ] OR [ #<_spindle_on> NE 1 ]]; then
M03 S#<s_drill>
G04 P8
O<if_01> endif

F0 G64
O<if_02> if [ #<_z> GT #<safe_height> ]; then 
G0 Z#<safe_height>
O<if_02> endif

#<next_z> = [#<z_drill_start> - #<z_drill_step>]
O<while_01> while [[ #<next_z> LT #<z_drill_intent> ] AND [  #<_z> LT #<z_drill_intent>  ]]
F#<f_drill>
G01 Z#<next_z>
G00 Z#<cleaning_height>
G04 P#<cleaning_pause>
F#<f_down>
G01 Z#<next_z>
#<next_z> = #<z_drill_start> - #<z_drill_step>
O<while_01> endwhile
F#<f_drill>
G01 Z#<z_drill_intent>
G00 Z#<back_height>
M02
